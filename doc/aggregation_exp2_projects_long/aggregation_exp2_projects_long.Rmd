---
title             : "Aggregation experiment 2 - Longer project descriptions"
shorttitle        : ""

note              : Created `r format(Sys.time())`

author: 
  - name          : "Shir Dekel"
  
floatsintext      : yes

bibliography      : '`r system.file("refs.bib", package = "shiR")`'
csl               : '`r system.file("apa.csl", package = "shiR")`'
documentclass     : "apa7"
classoption       : "man, donotrepeattitle"
output: 
  papaja::apa6_pdf:
    includes: 
      in_header: "preamble.tex"
---

```{r setup, include = FALSE}
opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
```

The first time we manipulated similarity, we did not find a main effect. This might have been because we only varied the type of project (oil well, newspaper, etc.), and the rest of the description remained identical (except for the gamble values). As such, I wrote longer project descriptions for each of the 10 domains. I also created 10 variations for each domain. This within-domain variation only exists in one of the contextual details. So a participant in the low similarity condition would see one of 10 slightly different variations of a set of 10 projects *from 10 different domains*. A participant in the high similarity condition would see one of 10 slightly different variations of a set of 10 projects *from the same domain*. See below for examples (see figure captions for explanations). All participants would see the same 10 gamble values.

```{r projects-long-joint-similarity-low, out.width = "100%", fig.cap = "Joint presentation, distribution absent, low similarity condition - example of one of the variations (cropped for space)", fig.pos = "H"}
image_read(here("inst", "materials", "projects_long_joint_similarity_low.png")) %>%
  image_trim() %>%
  image_crop(geometry_area(height = "1730"))
```

```{r include = FALSE}
paths <- here("inst", "materials") %>% 
  list.files() %>% 
  str_match("projects_long_joint_similarity_high_(.*).png") %>% 
  na.omit() %>% 
  split(rep(1:ncol(.), each = nrow(.)))

src <- 
  paths %>% 
  pmap(
    ~ c(
      '```{r projects-long-joint-similarity-high-{{.y}}, out.width = "100%", fig.cap = "Joint presentation, distribution absent, high similarity condition - {{.y}} project (cropped for space)", fig.pos = "H"}',
      'image_read(here("inst", "materials", "{{.x}}")) %>%
          image_trim() %>%
          image_crop(geometry_area(height = "1730"))',
      '```'
    ) %>% 
      knit_expand(text = .) # needs `text = `
  )

res <- 
  knit_child(text = unlist(src)) # only works when knitting
```

`r res`
